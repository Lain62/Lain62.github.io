---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import Header from '/src/components/Header.astro';
import Footer from '/src/components/Footer.astro';
import MainBody from '/src/components/MainBody.astro';
import HeadDefault from '/src/components/HeadDefault.astro';

export async function getStaticPaths({ paginate }) {
	const posts = await getCollection("gallery");
	posts.sort((a, b) =>  Date.parse(b.data.date) - Date.parse(a.data.date))
	return paginate(posts, { pageSize: 16 });
}
const images = import.meta.glob<{ default: ImageMetadata }>("/src/gallery/images/art-thumbnail/*.{jpeg,jpg,png,gif}");
const { page } = Astro.props;
const page_tittle = "Page " + page.currentPage + " - Lain62's Gallery"
---
<HeadDefault title={page_tittle}>
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Lain62's Gallery">
    <meta property="og:description" content="Lain62's art gallery">
</HeadDefault>
<body>
	<Header title="Lain62's Gallery" />
	<MainBody>
		<ul class="list-main">
			{page.data.map(({ data }) => {
			const imgPath = `/src/gallery/images/art-thumbnail/${data.image}`;
			return <li class="list-item" ><a href={`/gallery/art/${data.name}`}><Image class="art" src={images[imgPath]()} alt={data.alt}></Image></a></li>
			})}
		</ul>
	</MainBody>
	<div class="gallery-page">
		<h2>{page.currentPage}</h2>
	</div>
	<div class="gallery-footer">
		{page.url.prev != undefined? <a href={page.url.prev}><</a> : <p></p>}
		{page.url.next != undefined? <a href={page.url.next}>></a> : <p></p>}	
	</div>
	<Footer/>
</body>
<style>

 body {
	 background-color: #1B2021;
	 display: flex;
	 flex-direction: column;
	 align-items: center;
 }
 .gallery-footer a {
	 text-decoration: none;
	 color: #30343F;
	 font-size: 48px;
	 margin: 0;
	 padding-left: 10px;
	 padding-right: 10px;
	 margin-left: 20px;
	 margin-right: 20px;
	 border-radius: 10px;
	 background-color: #EA638C;
	 font-family: "Azeret Mono";
 }

 .gallery-footer a:hover {
	 color: #FFD9DA;
	 background-color: #89023E;
	 /* border-bottom-color: #EA638C; */
 }
 
 .gallery-footer {
	 padding-bottom: 20px;
 }
 
 .gallery-footer, .gallery-page {
	 background-color: #30343F;
	 max-width:900px;
	 width: 100%;
	 height: 80px;
	 margin-left: auto;
	 margin-right: auto;	 
	 /* border-radius: 15px; */
	 border-top-color: #EA638C;
	 border-top-style: solid;
	 border-top-width: 0;
	 display: flex;
	 justify-content: space-between;
	 align-items: center;
 }

 .gallery-page {
	 height:40px;
	 text-align: center;
	 justify-content: center;
	 border-bottom-width: 0;
	 border-top-width: 2px;
	 border-bottom-right-radius: 0px;
	 border-bottom-left-radius: 0px;
 }

 .gallery-page h2 {
	 font-size: 24px;
	 padding: 10px;
	 background-color: #30343F;
	 border-radius: 10px;
	 border-style: solid;
	 border-width: 2px;
	 color: #FFD9DA;
	 border-color: #EA638C;
	 font-family: "Azeret Mono";
	 z-index: 20;
 }
 
 .gallery-header {
	 background-color: #30343F;
	 max-width:900px;
	 height: 80px;
	 margin-left: auto;
	 margin-right: auto;
	 border-radius: 15px;
	 border-bottom-width: 2px;
	 border-bottom-left-radius: 0;
	 border-bottom-right-radius: 0;
	 border-bottom-color: #EA638C;
	 border-bottom-style: solid;
	 display: flex;
	 justify-content: flex-start;
	 align-items: center;
 }
 .gallery-header h1 {
	 padding: 0;
	 display:flex;
	 margin: 0;
	 margin-left: 20px;
	 justify-content: flex-start;
	 vertical-align: middle;
	 color: #FFD9DA;
	 text-shadow: 0 2px #89023E;
	 font-size: 24px;
	 font-family: "Azeret Mono";
 }

 .gallery-main {
	 background-color: #30343F;
	 max-width:900px;
	 margin-left: auto;
	 margin-right: auto;
	 padding-top: 20px;
	 padding-bottom: 20px;
	 width: 100%;
 }
 .list-main {
	 padding-left: 0;
	 display: flex;
	 flex-direction: row;
	 list-style-type: none;
	 gap: 40px;
	 justify-content: center;
	 max-width: 900px;
	 width: 100%;
	 margin-left: auto;
	 margin-right: auto;
	 flex-wrap: wrap;
 }
 .list-item {
	 object-fit:cover;
	 width: 10em;
	 height: 10em;
 }
 .art {
	 object-fit:cover;
	 width: 10em;
	 height: 10em;
	 max-width:250px;
	 max-height: 250px;
	 background-color: #EA638C;
	 padding: 4px;
	 border-radius: 15px;
	 /* border-bottom: 6px solid #89023E; */	 
 }
 .art:hover {
	 background-color: #89023E;
	 /* border-bottom: 6px solid #EA638C; */
	 cursor: pointer;
 }
</style>
